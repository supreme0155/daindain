<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>丹丹漢堡 - 菜單管理</title>
<style>
body{font-family:'Microsoft JhengHei',Arial,sans-serif;background:#fafaff;}
h1{color:#e74c3c;text-align:center;margin-top:32px;}
.menu-edit-wrap{max-width:670px;margin:32px auto;padding:24px;background:#fff;border-radius:16px;box-shadow:0 4px 16px #e74c3c15;}
.category-block{margin-bottom:36px;background:#fafafa;border-radius:12px;padding:16px 18px;}
.category-title{font-size:1.18em;font-weight:bold;color:#d94b27;display:flex;align-items:center;gap:10px;}
.menu-item-edit{display:flex;align-items:center;gap:12px;margin:10px 0;}
.menu-item-edit input[type="text"], .menu-item-edit input[type="number"]{font-size:1em;width:110px;}
.menu-item-edit button{background:#fff;color:#e74c3c;border:1px solid #e74c3c;border-radius:5px;padding:4px 10px;cursor:pointer;}
.menu-item-edit button:hover{background:#fee;}
.add-btn{background:#e74c3c;color:#fff;padding:5px 18px;border:none;border-radius:5px;cursor:pointer;}
.add-btn:hover{background:#d94b27;}
.save-btn{display:block;margin:30px auto 0 auto;background:#1abc9c;color:#fff;padding:8px 34px;border:none;border-radius:7px;font-size:1.16em;cursor:pointer;}
.save-btn:hover{background:#179b81;}
input[type="text"],input[type="number"],select{border:1px solid #ccc;border-radius:4px;padding:5px;}
.cat-note{background:#fff4c2;border-radius:8px;color:#b45b02;font-size:1em;padding:8px 10px 7px 14px;margin:8px 0 10px 0;}
@media(max-width:700px){.menu-edit-wrap{padding:6vw;width:97vw;}}
</style>
</head>
<body>
<h1>菜單管理</h1>
<div class="menu-edit-wrap" id="menuEditWrap"></div>
<button class="save-btn" onclick="saveMenu()">儲存菜單</button>
<script>
// --------- 1. 飲料品項 (自動來自飲品.xlsx) ----------
const drinkOptions = [
  "紅茶(冰/熱)", "奶茶(冰/熱)", "烏龍茶", "蘋果汁", "美式咖啡", "巧克力(冰/熱)",
  "玉米濃湯", "金桔檸檬氣泡飲", "冰紅茶(大)", "冰紅茶(小)", "咖啡(冰/熱)"
];

// --------- 2. 初版菜單 (自動合併你 Excel 的內容) ----------
let menuData = [
  // 定食餐
  {
    category: "精選定食餐 (附29元飲料)",
    // note: "一份套餐限加購$26地瓜薯條 或 $39義式紅醬波浪薯；漢堡可+$10加吉司 (起司)；早上10點前可加蛋",
    items: [
      { name: "招牌漢堡排+腿皮炸雞+腿皮飯", price: 104, drink: "" },
      { name: "香酥雞腿排+腿皮炸雞+腿皮飯", price: 104, drink: "" },
      { name: "漢堡排豬肉堡+腿皮炸雞+腿皮飯", price: 97, drink: "" },
      { name: "招牌雞塊+腿皮炸雞+腿皮飯", price: 104, drink: "" },
      { name: "鮮嫩雞腿堡+玉米濃湯", price: 99, drink: "" },
      { name: "鮮嫩雞米花+腿皮飯", price: 97, drink: "" },
      { name: "迷迭香雞+腿皮炸雞", price: 107, drink: "" },
      { name: "招牌漢堡排+腿皮飯+玉米濃湯", price: 114, drink: "" },
      { name: "香酥雞腿排+腿皮飯+玉米濃湯", price: 114, drink: "" },
      { name: "漢堡排豬肉堡+腿皮飯+玉米濃湯", price: 108, drink: "" },
      { name: "鮮嫩雞腿堡+腿皮飯+玉米濃湯", price: 107, drink: "" },
      { name: "五穀雞肉粥+金色薯條餐", price: 94, drink: "" },
      { name: "赤肉羹麵線+雞可樂餅", price: 82, drink: "" },
      { name: "香酥吉列豬排堡+杏鮑菇炸棒", price: 99, drink: "" }
    ]
  },
  // 早餐
  {
    category: "早安特惠餐 (附29元飲料)",
    
    items: [
      { name: "漢堡蛋+黃金薯條", price: 54, drink: "" },
      { name: "腿皮炸雞堡+薯餅", price: 54, drink: "" },
      { name: "鮮嫩雞米花+腿皮飯", price: 50, drink: "" },
      { name: "招牌雞塊+腿皮飯", price: 50, drink: "" },
      { name: "五穀雞肉粥", price: 43, drink: "" },
      { name: "雞蛋吐司+黃金雞米花", price: 43, drink: "" },
      { name: "奶酪可麗餅", price: 28, drink: "" }
    ]
  },
  // 美味丹點
  {
    category: "美味丹點",
    items: [
      { name: "排骨酥肉燥麵", price: 68 },
      { name: "赤肉羹麵線煲", price: 45 },
      { name: "香菇雞腿飯", price: 68 },
      { name: "雞蛋飯", price: 41 },
      { name: "玉米濃湯", price: 27 },
      { name: "無骨雞塊(9入)", price: 78 },
      { name: "黃金雞米花", price: 47 },
      { name: "腿皮炸雞", price: 47 },
      { name: "豬肉可樂餅", price: 41 },
      { name: "雞可樂餅", price: 41 },
      { name: "雞米花", price: 37 },
      { name: "鮮嫩雞腿堡", price: 66 },
      { name: "香酥吉列豬排堡", price: 66 },
      { name: "雞蛋吐司", price: 37 },
      { name: "黃金薯條", price: 41 },
      { name: "紅藜波浪薯", price: 36 },
      { name: "薯餅", price: 23 },
      { name: "杏鮑菇炸棒", price: 41 }
    ]
  },
  // 飲品
  {
  category: "飲品",
  items: [
    { name: "可樂(中)", price: 29 },
    { name: "可樂(大)", price: 34 },
    { name: "汽水(中)", price: 29 },
    { name: "汽水(大)", price: 34 },
    { name: "錫蘭紅茶(中)", price: 29 },
    { name: "錫蘭紅茶(大)", price: 34 },
    { name: "蘋果汁(中)", price: 29 },
    { name: "蘋果汁(大)", price: 34 },
    { name: "台灣烏龍(無糖)(中)", price: 29 },
    { name: "台灣烏龍(無糖)(大)", price: 34 },
    { name: "紅茶牛奶(中)", price: 29 },
    { name: "紅茶牛奶(大)", price: 34 },
    { name: "熱桂花烏龍", price: 29 },
    { name: "熱美式(新品)", price: 29 }
  ]
}

];

// --------- 3. UI 編輯區 ---------
function renderMenuEdit(){
    let html = '';
    menuData.forEach((cat,ci)=>{
        html += `<div class="category-block">
            <div class="category-title">
                <input type="text" value="${cat.category}" onchange="editCategory(${ci},this.value)" style="font-weight:bold;width:180px;">
                <button onclick="delCategory(${ci})">刪分類</button>
            </div>
            ${cat.note ? `<div class="cat-note">${cat.note}</div>` : ''}
            ${cat.items.map((item,ii)=>`
                <div class="menu-item-edit">
                    <input type="text" value="${item.name}" onchange="editItem(${ci},${ii},'name',this.value)">
                    <input type="number" min="0" value="${item.price}" style="width:70px;" onchange="editItem(${ci},${ii},'price',this.value)">
                    ${/定食餐|早安/.test(cat.category) ? renderDrinkSelect(ci, ii, item.drink || "") : ""}
                    <button onclick="delItem(${ci},${ii})">刪除</button>
                </div>
            `).join('')}
            <div style="margin-top:6px;">
                <button class="add-btn" onclick="addItem(${ci})">＋新增品項</button>
            </div>
        </div>`;
    });
    html += `<div><button class="add-btn" onclick="addCategory()">＋新增分類</button></div>`;
    document.getElementById('menuEditWrap').innerHTML = html;
}
function renderDrinkSelect(ci, ii, drink) {
    let opts = drinkOptions.map(d =>
      `<option value="${d}" ${drink===d?"selected":""}>${d}</option>`).join('');
    return `<select onchange="editItem(${ci},${ii},'drink',this.value)">
      <option value="">--飲料--</option>${opts}
    </select>`;
}
function editCategory(ci,val){ menuData[ci].category=val; }
function delCategory(ci){ if(confirm('確定刪除此分類？')){ menuData.splice(ci,1); renderMenuEdit(); } }
function addCategory(){ menuData.push({category:'新分類',items:[]}); renderMenuEdit(); }
function editItem(ci,ii,k,val){
    if(k=='price') val=parseInt(val,10)||0;
    menuData[ci].items[ii][k]=val;
}
function delItem(ci,ii){ menuData[ci].items.splice(ii,1); renderMenuEdit(); }
function addItem(ci){ 
    let obj = {name:'新餐點',price:0};
    if(/定食餐|早安/.test(menuData[ci].category)) obj.drink = "";
    menuData[ci].items.push(obj); 
    renderMenuEdit(); 
}
function saveMenu(){
    localStorage.setItem('dandan_menu',JSON.stringify(menuData));
    alert('菜單已儲存！所有點餐頁面將自動更新。');
}
renderMenuEdit();
</script>
</body>
</html>
